
{% extends 'base.html' %}

{% block title %}Find a Human Food{% endblock %}

{% block content %}

<div class="container-lg">
    <h1>Find a Human Food</h1>
    
    <!-- Outputs error messages -->
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for error in messages %}
                <p class="flash">⚠️ {{ error }} ⚠️</p>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="hf">
        Please enter a food below (e.g. strawberries, tuna, et cetra) to check the maximum amount your pet may receive per day. 
    </div>

    <!-- Prompt user to give a human food to look up in the USDA food database -->

    <div>
        <form method="POST" action="{{ url_for('human_foods.search_human_foods') }}">
            <div id="hf_form" class="form-group">
                <label for="food_name" class="hf-form-label">Food name:</label>
                <input type="text" id="name" name="food_name" class="hf_input" placeholder="Please type the name of a food to look up">
                <input type="submit" value="Search" id="hf_submit" class="btn btn-secondary btn-lg">
            </div>
        </form>

        {% if found_foods %}
            <div class="{% if found_foods|length > 3 %}big_table{% else %}small_table{% endif %}">
                <table class="human_food_container">
                    {% for food in found_foods %}
                        <tr class="{% if loop.index0 is even %}even-row{% else %}odd-row{% endif %}">
                            <td class="human_food">
                                <div class="food_name">
                                    {% if food.food_type == "Brand" %}
                                        {{ food.brand_name }} {{ food.food_name}}
                                    {% elif food.food_type == "Generic" %}
                                        {{ food.food_name }}
                                    {% endif %}
                                </div>

                                <div class="calorie_info">
                                    {{ food.calorie_string }} ({{ food.serving_size_string }})
                                </div>
                            </td>
                            <td class="hf_button">
                                <a href="{{ url_for('human_foods.calculate_treat_amounts', treat_kcal_num=food.num_calories, serving_size_num=food.serving_size_number, serving_size_string=food.serving_size_string) }}">
                                    <button type="button" id="treat_calc" class="btn btn-primary btn-sm">
                                        Calculate Treat Amounts
                                    </button>
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        {% endif %}

    </div>
</div>
{% endblock %}